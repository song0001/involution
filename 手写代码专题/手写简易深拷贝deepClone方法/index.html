<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>手写简易深拷贝deepClone方法</title>
</head>
<body>
  <script>
    function isObject (obj) {
      return (typeof obj === 'object') && obj !== null
    }
    function deepClone (obj) {
      if (!isObject(obj)) {
        return
      }
      const isArray = Array.isArray(obj)
      const newObj = isArray ? [] : {}
      Reflect.ownKeys(obj).forEach(key => {
        const value = obj[key]
        newObj[key] = isObject(value) ? deepClone(value) : value
      })
      return newObj
    }
    const obj = {
      id: Symbol('id'),
      name: 'AAA',
      age: 23,
      colors: ['red'],
      job: {
        name: 'FE',
        salary: 200
      },
      sayName: function () {
        console.log('funciton')
      }
    }
    const cloneObj = deepClone(obj)
    console.log(cloneObj.id)
    console.log(cloneObj.colors, obj.colors)
    console.log(cloneObj.job, obj.job)
    obj.job.name = 'UI'
    obj.job.salary = 300
    obj.colors.push('green')
    obj.sayName()
    console.log(cloneObj.colors, obj.colors)
    console.log(cloneObj.job, obj.job)
    cloneObj.sayName()
  </script>
</body>
</html>