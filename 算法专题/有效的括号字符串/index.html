<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>有效的括号字符串</title>
</head>
<body>
  <script>
    // https://leetcode-cn.com/problems/valid-parenthesis-string/

    // 1.基础题
    function checkValidString1 (str) {
      // 空字符串也是有效的
      if (str.length === 0) {
        return true
      }
      const mapObj = {
        ')': '(',
        ']': '[',
        '}': '{'
      }
      const chars = ['(', '[', '{']
      const stack = []
      for (let index = 0; index < str.length; index++) {
        const char = str[index]
        if (chars.includes(char)) {
          stack.push(char)
        } else {
          const popChar = stack.pop()
          if (mapObj[char] !== popChar) {
            return false
          }
        }
      }
      return !stack.length
    }
    console.log(checkValidString1('()'))       // true
    console.log(checkValidString1('()[]{}'))   // true
    console.log(checkValidString1('([{}])'))   // true
    console.log(checkValidString1('([})'))     // false
    console.log(checkValidString1('()[}'))     // false


    // 2. 变异体， *代表万能字符，包括空字符串
    function checkValidString2 (str) {
      // 空字符串也是有效的
      if (str.length === 0) {
        return true
      }
      const left = []
      const star = []
      for (let index = 0; index < str.length; index++) {
        const char = str[index]
        if (char === '(') {
          left.push(index)
        } else if (char === '*') {
          star.push(index)
        } else {
          if (left.length) {
            left.pop()
          } else if (star.length) {
            star.pop()
          } else {
            return false
          }
        }
      }
      if (left.length > star.length) {
        return false
      }
      while (left.length && star.length) {
        const leftPop = left.pop()
        const starPop = star.pop()
        if (starPop < leftPop) {
          return false
        }
      }
      return true
    }
    console.log(checkValidString2('(*'))
    console.log(checkValidString2('(*)'))
    console.log(checkValidString2('()*'))
    console.log(checkValidString2('(*))'))
  </script>
</body>
</html>